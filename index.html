<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carnet de Voyage Tenerife</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --red: #e63946;
            --green: #2a9d8f;
            --blue: #0077b6;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: #1f2937;
        }

        header {
            background: #1d3557;
            color: white;
            padding: 1.5rem 1rem;
            text-align: center;
        }

        h1 { margin: 0; font-size: 1.6rem; }
        p.subtitle { margin: 5px 0 0; opacity: 0.8; font-size: 0.9rem; }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 80px);
        }

        @media(min-width: 900px) {
            .container { flex-direction: row; }
            .list-panel { width: 40%; overflow-y: auto; padding: 20px; }
            .map-panel { width: 60%; position: relative; }
            #map { height: 100%; }
        }

        @media(max-width: 899px) {
            .map-panel {
                height: 40vh;
                width: 100%;
                position: sticky;
                top: 0;
                z-index: 1000;
            }
            .list-panel { padding: 15px; background: var(--bg); }
        }

        #map { height: 100%; width: 100%; z-index: 1; }

        /* Cartes de cat√©gories */
        .category-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .cat-header {
            padding: 12px 15px;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cat-resto { background-color: var(--red); }
        .cat-view { background-color: var(--green); }
        .cat-visit { background-color: var(--blue); }

        ul { list-style: none; padding: 0; margin: 0; }

        li {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }
        li:hover { background-color: #f1f5f9; }
        li:last-child { border-bottom: none; }

        .li-info {
            cursor: pointer;
            flex-grow: 1;
            margin-right: 10px;
        }

        .item-name { display: block; font-weight: 600; color: #333; }
        .item-desc { display: block; font-size: 0.85rem; color: #666; margin-top: 3px; }
        .item-day {
            display: inline-block;
            font-size: 0.75rem;
            background: #eee;
            color: #555;
            padding: 2px 6px;
            border-radius: 4px;
            margin-top: 5px;
        }

        /* Bouton GPS */
        .btn-gps {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 6px 10px;
            text-decoration: none;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: all 0.2s;
        }
        .btn-gps:hover {
            background-color: #333;
            color: white;
            border-color: #333;
        }

        /* L√©gende */
        .legend-bar {
            background: white;
            padding: 8px;
            display: flex;
            justify-content: center;
            gap: 15px;
            font-size: 0.8rem;
            border-bottom: 1px solid #ddd;
        }
        .dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 4px; }

        /* Popup map style */
        .popup-btn {
            display: inline-block;
            margin-top: 8px;
            background: #333;
            color: white !important;
            padding: 4px 10px;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.8rem;
        }

    </style>
</head>
<body>

<header>
    <h1>Tenerife : Le Carnet</h1>
    <p class="subtitle">Itin√©raires & Adresses</p>
</header>

<div class="container">
    
    <div class="map-panel">
        <div class="legend-bar">
            <span><span class="dot" style="background:var(--red)"></span>Miam</span>
            <span><span class="dot" style="background:var(--green)"></span>Vues</span>
            <span><span class="dot" style="background:var(--blue)"></span>Visites</span>
        </div>
        <div id="map"></div>
    </div>

    <div class="list-panel">

        <div class="category-card">
            <div class="cat-header cat-resto">
                üçΩÔ∏è Restaurants & March√©s
            </div>
            <ul>
                <li>
                    <div class="li-info" onclick="focusMap(28.2428, -16.7937)">
                        <span class="item-name">Restaurante El Rancho</span>
                        <span class="item-desc">Poulet grill√©, ambiance locale.</span>
                        <span class="item-day">Vendredi midi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Restaurante+El+Rancho+Tenerife" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.3947, -16.6396)">
                        <span class="item-name">Las Aguas (San Juan)</span>
                        <span class="item-desc">Zone d√©jeuner bord de mer.</span>
                        <span class="item-day">Samedi midi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Restaurante+Las+Aguas+San+Juan+de+la+Rambla" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.0527, -16.7066)">
                        <span class="item-name">Mercado La Pepa</span>
                        <span class="item-desc">Food market & courses.</span>
                        <span class="item-day">Jeudi 15h30</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=La+Pepa+Food+Market+Tenerife" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.4633, -16.2518)">
                        <span class="item-name">Mercado de √Åfrica</span>
                        <span class="item-desc">Grand march√© produits frais.</span>
                        <span class="item-day">Mardi matin</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mercado+Nuestra+Senora+de+Africa" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.3440, -16.8462)">
                        <span class="item-name">El Palmar / Buenavista</span>
                        <span class="item-desc">Zone d√©jeuner apr√®s le Teno.</span>
                        <span class="item-day">Lundi midi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=El+Palmar+Buenavista+del+Norte" target="_blank" class="btn-gps">üìç GO</a>
                </li>
            </ul>
        </div>

        <div class="category-card">
            <div class="cat-header cat-view">
                üëÄ Points de vue
            </div>
            <ul>
                <li>
                    <div class="li-info" onclick="focusMap(28.2240, -16.6322)">
                        <span class="item-name">Roques de Garc√≠a</span>
                        <span class="item-desc">Le doigt de Dieu (Teide).</span>
                        <span class="item-day">Vendredi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Roques+de+Garcia+Tenerife" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.2807, -16.7675)">
                        <span class="item-name">Mirador de los Poleos</span>
                        <span class="item-desc">Spot Sunset.</span>
                        <span class="item-day">Lundi Soir</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mirador+de+los+Poleos" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.2383, -16.6982)">
                        <span class="item-name">Narices del Teide</span>
                        <span class="item-desc">Paysages volcaniques noirs.</span>
                        <span class="item-day">Vendredi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mirador+Narices+del+Teide" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.2404, -16.8370)">
                        <span class="item-name">Mirador Archipenque</span>
                        <span class="item-desc">Vue sur Los Gigantes.</span>
                        <span class="item-day">Samedi matin</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mirador+Archipenque" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.4822, -16.4345)">
                        <span class="item-name">Mirador La Gara√±ona</span>
                        <span class="item-desc">Vue c√¥te nord (El Sauzal).</span>
                        <span class="item-day">Samedi aprem</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mirador+de+La+Garanona" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.3279, -16.8563)">
                        <span class="item-name">Mirador de Barac√°n</span>
                        <span class="item-desc">Cr√™te Nord/Sud.</span>
                        <span class="item-day">Lundi matin</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Mirador+Altos+de+Baracan" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.3533, -16.8845)">
                        <span class="item-name">Teno Alto</span>
                        <span class="item-desc">Hameau dans les montagnes.</span>
                        <span class="item-day">Lundi matin</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Teno+Alto+Tenerife" target="_blank" class="btn-gps">üìç GO</a>
                </li>
            </ul>
        </div>

        <div class="category-card">
            <div class="cat-header cat-visit">
                üì∑ Visites & Plages
            </div>
            <ul>
                <li>
                    <div class="li-info" onclick="focusMap(28.3736, -16.7648)">
                        <span class="item-name">Garachico</span>
                        <span class="item-desc">Piscines naturelles El Calet√≥n.</span>
                        <span class="item-day">Samedi midi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Piscinas+Naturales+El+Caleton+Garachico" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.4780, -16.4385)">
                        <span class="item-name">Parque Los Lavaderos</span>
                        <span class="item-desc">Parc √† El Sauzal.</span>
                        <span class="item-day">Samedi aprem</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Parque+Los+Lavaderos+Tenerife" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.4705, -16.4346)">
                        <span class="item-name">Casa del Vino</span>
                        <span class="item-desc">Mus√©e et d√©gustation.</span>
                        <span class="item-day">Samedi aprem</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Casa+del+Vino+Tenerife" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.0917, -16.7437)">
                        <span class="item-name">Playa del Duque</span>
                        <span class="item-desc">Plage calme sud.</span>
                        <span class="item-day">Dimanche / Mardi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Playa+del+Duque" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.0527, -16.7244)">
                        <span class="item-name">Playa Las Vistas</span>
                        <span class="item-desc">Grande plage am√©nag√©e.</span>
                        <span class="item-day">Dimanche / Mercredi</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Playa+Las+Vistas" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                 <li>
                    <div class="li-info" onclick="focusMap(28.1816, -16.8170)">
                        <span class="item-name">Playa San Juan</span>
                        <span class="item-desc">Plage familiale.</span>
                        <span class="item-day">Mardi aprem</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Playa+San+Juan+Tenerife" target="_blank" class="btn-gps">üìç GO</a>
                </li>
                <li>
                    <div class="li-info" onclick="focusMap(28.3045, -16.5666)">
                        <span class="item-name">Mus√©e El Portillo</span>
                        <span class="item-desc">Visite gratuite Teide.</span>
                        <span class="item-day">Vendredi 16h45</span>
                    </div>
                    <a href="https://www.google.com/maps/search/?api=1&query=Centro+de+Visitantes+El+Portillo" target="_blank" class="btn-gps">üìç GO</a>
                </li>
            </ul>
        </div>

    </div>
</div>

<script>
    // --- CONFIGURATION ---
    var baseUrl = "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/";
    var shadowUrl = "https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png";
    
    function createIcon(color) {
        return new L.Icon({
            iconUrl: baseUrl + 'marker-icon-2x-' + color + '.png',
            shadowUrl: shadowUrl,
            iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41]
        });
    }

    var restoIcon = createIcon('red');
    var viewIcon = createIcon('green');
    var visitIcon = createIcon('blue');
    var defaultIcon = createIcon('grey');

    // --- CARTE ---
    var map = L.map('map').setView([28.2916, -16.6291], 10);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap'
    }).addTo(map);

    // --- DONN√âES AVEC LIENS ---
    var points = [
        // Restos
        { coords: [28.2428, -16.7937], title: "El Rancho", type: "resto", url: "https://www.google.com/maps/search/?api=1&query=Restaurante+El+Rancho+Tenerife" },
        { coords: [28.3947, -16.6396], title: "Las Aguas", type: "resto", url: "https://www.google.com/maps/search/?api=1&query=Restaurante+Las+Aguas+San+Juan+de+la+Rambla" },
        { coords: [28.0527, -16.7066], title: "Mercado La Pepa", type: "resto", url: "https://www.google.com/maps/search/?api=1&query=La+Pepa+Food+Market+Tenerife" },
        { coords: [28.4633, -16.2518], title: "March√© Santa Cruz", type: "resto", url: "https://www.google.com/maps/search/?api=1&query=Mercado+Nuestra+Senora+de+Africa" },
        { coords: [28.3440, -16.8462], title: "El Palmar / Buenavista", type: "resto", url: "https://www.google.com/maps/search/?api=1&query=El+Palmar+Buenavista+del+Norte" },

        // Vues
        { coords: [28.2240, -16.6322], title: "Roques de Garc√≠a", type: "view", url: "https://www.google.com/maps/search/?api=1&query=Roques+de+Garcia+Tenerife" },
        { coords: [28.2807, -16.7675], title: "Mirador de los Poleos", type: "view", url: "https://www.google.com/maps/search/?api=1&query=Mirador+de+los+Poleos" },
        { coords: [28.2383, -16.6982], title: "Narices del Teide", type: "view", url: "https://www.google.com/maps/search/?api=1&query=Mirador+Narices+del+Teide" },
        { coords: [28.2404, -16.8370], title: "Mirador Archipenque", type: "view", url: "https://www.google.com/maps/search/?api=1&query=Mirador+Archipenque" },
        { coords: [28.4822, -16.4345], title: "Mirador Gara√±ona", type: "view", url: "https://www.google.com/maps/search/?api=1&query=Mirador+de+La+Garanona" },
        { coords: [28.3279, -16.8563], title: "Mirador de Barac√°n", type: "view", url: "https://www.google.com/maps/search/?api=1&query=Mirador+Altos+de+Baracan" },
        { coords: [28.3533, -16.8845], title: "Teno Alto", type: "view", url: "https://www.google.com/maps/search/?api=1&query=Teno+Alto+Tenerife" },

        // Visites
        { coords: [28.3736, -16.7648], title: "Garachico", type: "visit", url: "https://www.google.com/maps/search/?api=1&query=Piscinas+Naturales+El+Caleton+Garachico" },
        { coords: [28.4780, -16.4385], title: "Parque Los Lavaderos", type: "visit", url: "https://www.google.com/maps/search/?api=1&query=Parque+Los+Lavaderos+Tenerife" },
        { coords: [28.4705, -16.4346], title: "Casa del Vino", type: "visit", url: "https://www.google.com/maps/search/?api=1&query=Casa+del+Vino+Tenerife" },
        { coords: [28.0917, -16.7437], title: "Playa del Duque", type: "visit", url: "https://www.google.com/maps/search/?api=1&query=Playa+del+Duque" },
        { coords: [28.0527, -16.7244], title: "Playa Las Vistas", type: "visit", url: "https://www.google.com/maps/search/?api=1&query=Playa+Las+Vistas" },
        { coords: [28.1816, -16.8170], title: "Playa San Juan", type: "visit", url: "https://www.google.com/maps/search/?api=1&query=Playa+San+Juan+Tenerife" },
        { coords: [28.3045, -16.5666], title: "Mus√©e El Portillo", type: "visit", url: "https://www.google.com/maps/search/?api=1&query=Centro+de+Visitantes+El+Portillo" },
        
        // Logistique
        { coords: [28.0444, -16.5725], title: "A√©roport TFS", type: "logistics", url: "https://www.google.com/maps/search/?api=1&query=Aeropuerto+Tenerife+Sur" }
    ];

    points.forEach(point => {
        var chosenIcon = defaultIcon;
        if (point.type === 'resto') chosenIcon = restoIcon;
        if (point.type === 'view') chosenIcon = viewIcon;
        if (point.type === 'visit') chosenIcon = visitIcon;

        // Cr√©ation de la popup avec le bouton GPS
        var popupContent = `
            <b>${point.title}</b><br>
            <a href="${point.url}" target="_blank" class="popup-btn">üìç Lancer GPS</a>
        `;

        L.marker(point.coords, {icon: chosenIcon}).addTo(map)
            .bindPopup(popupContent);
    });

    // Fonction pour zoomer
    function focusMap(lat, lng) {
        map.flyTo([lat, lng], 13);
        if (window.innerWidth < 900) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
</script>

</body>
</html>
