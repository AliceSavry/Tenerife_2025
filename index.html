<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carnet de Voyage Tenerife</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --red: #e63946;
            --green: #2a9d8f;
            --blue: #0077b6;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: #1f2937;
        }

        header {
            background: #1d3557;
            color: white;
            padding: 1.5rem 1rem;
            text-align: center;
        }

        h1 { margin: 0; font-size: 1.6rem; }
        p.subtitle { margin: 5px 0 0; opacity: 0.8; font-size: 0.9rem; }

        /* Layout */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 80px); /* Hauteur restante */
        }

        /* Sur mobile : carte en haut, listes en bas */
        @media(min-width: 900px) {
            .container {
                flex-direction: row;
            }
            .list-panel {
                width: 40%;
                overflow-y: auto;
                padding: 20px;
            }
            .map-panel {
                width: 60%;
                position: relative;
            }
            #map { height: 100%; border-radius: 0; }
        }

        @media(max-width: 899px) {
            .map-panel {
                height: 40vh; /* Carte prend 40% de l'√©cran */
                width: 100%;
                position: sticky;
                top: 0;
                z-index: 1000;
            }
            .list-panel {
                padding: 15px;
                background: var(--bg);
            }
        }

        #map { height: 100%; width: 100%; }

        /* Cartes de cat√©gories */
        .category-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .cat-header {
            padding: 12px 15px;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cat-resto { background-color: var(--red); }
        .cat-view { background-color: var(--green); }
        .cat-visit { background-color: var(--blue); }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        li {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer; /* Indique qu'on peut cliquer */
            transition: background 0.2s;
        }
        li:hover { background-color: #f1f5f9; }
        li:last-child { border-bottom: none; }

        .item-name {
            display: block;
            font-weight: 600;
            color: #333;
        }
        .item-desc {
            display: block;
            font-size: 0.85rem;
            color: #666;
            margin-top: 3px;
        }
        .item-day {
            display: inline-block;
            font-size: 0.75rem;
            background: #eee;
            color: #555;
            padding: 2px 6px;
            border-radius: 4px;
            margin-top: 5px;
        }

        /* L√©gende simple */
        .legend-bar {
            background: white;
            padding: 8px;
            display: flex;
            justify-content: center;
            gap: 15px;
            font-size: 0.8rem;
            border-bottom: 1px solid #ddd;
        }
        .dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; margin-right: 4px; }

    </style>
</head>
<body>

<header>
    <h1>Tenerife : Le Carnet</h1>
    <p class="subtitle">Cliquez sur un lieu pour le voir sur la carte</p>
</header>

<div class="container">
    
    <div class="map-panel">
        <div class="legend-bar">
            <span><span class="dot" style="background:var(--red)"></span>Miam</span>
            <span><span class="dot" style="background:var(--green)"></span>Vues</span>
            <span><span class="dot" style="background:var(--blue)"></span>Visites</span>
        </div>
        <div id="map"></div>
    </div>

    <div class="list-panel">

        <div class="category-card">
            <div class="cat-header cat-resto">
                üçΩÔ∏è Restaurants & March√©s
            </div>
            <ul>
                <li onclick="focusMap(28.2428, -16.7937)">
                    <span class="item-name">Restaurante El Rancho</span>
                    <span class="item-desc">Poulet grill√©, ambiance locale sur la route du Teide.</span>
                    <span class="item-day">Vendredi midi</span>
                </li>
                <li onclick="focusMap(28.3947, -16.6396)">
                    <span class="item-name">Las Aguas (ou Caf√© local)</span>
                    <span class="item-desc">Pause d√©jeuner vers San Juan de la Rambla.</span>
                    <span class="item-day">Samedi midi</span>
                </li>
                <li onclick="focusMap(28.0527, -16.7066)">
                    <span class="item-name">Mercado La Pepa</span>
                    <span class="item-desc">Food market pour manger ou faire des courses √† l'arriv√©e.</span>
                    <span class="item-day">Jeudi</span>
                </li>
                <li onclick="focusMap(28.4633, -16.2518)">
                    <span class="item-name">Mercado Ntra. Sra. de √Åfrica</span>
                    <span class="item-desc">Le grand march√© de Santa Cruz (produits frais).</span>
                    <span class="item-day">Mardi matin</span>
                </li>
                <li onclick="focusMap(28.3440, -16.8462)">
                    <span class="item-name">El Palmar / Buenavista</span>
                    <span class="item-desc">Zone d√©jeuner apr√®s le Teno.</span>
                    <span class="item-day">Lundi midi</span>
                </li>
            </ul>
        </div>

        <div class="category-card">
            <div class="cat-header cat-view">
                üëÄ Points de vue (Miradors)
            </div>
            <ul>
                <li onclick="focusMap(28.2240, -16.6322)">
                    <span class="item-name">Roques de Garc√≠a (Teide)</span>
                    <span class="item-desc">Le fameux rocher "Doigt de Dieu". Incontournable.</span>
                    <span class="item-day">Vendredi</span>
                </li>
                <li onclick="focusMap(28.2807, -16.7675)">
                    <span class="item-name">Mirador de los Poleos</span>
                    <span class="item-desc">Spot magnifique pour le coucher de soleil.</span>
                    <span class="item-day">Vendredi & Lundi soir</span>
                </li>
                <li onclick="focusMap(28.2383, -16.6982)">
                    <span class="item-name">Narices del Teide / Samara</span>
                    <span class="item-desc">Paysages volcaniques noirs.</span>
                    <span class="item-day">Vendredi</span>
                </li>
                <li onclick="focusMap(28.2404, -16.8370)">
                    <span class="item-name">Mirador Archipenque</span>
                    <span class="item-desc">Meilleure vue sur les falaises de Los Gigantes.</span>
                    <span class="item-day">Samedi matin</span>
                </li>
                <li onclick="focusMap(28.4822, -16.4345)">
                    <span class="item-name">Mirador La Gara√±ona</span>
                    <span class="item-desc">Vue vertigineuse sur la c√¥te nord (El Sauzal).</span>
                    <span class="item-day">Samedi aprem</span>
                </li>
                <li onclick="focusMap(28.3279, -16.8563)">
                    <span class="item-name">Mirador de Barac√°n</span>
                    <span class="item-desc">La cr√™te entre le nord vert et le sud sec.</span>
                    <span class="item-day">Lundi matin</span>
                </li>
                <li onclick="focusMap(28.3533, -16.8845)">
                    <span class="item-name">Teno Alto</span>
                    <span class="item-desc">Hameau perdu dans les montagnes (fromage de ch√®vre).</span>
                    <span class="item-day">Lundi matin</span>
                </li>
            </ul>
        </div>

        <div class="category-card">
            <div class="cat-header cat-visit">
                üì∑ Visites & Plages
            </div>
            <ul>
                <li onclick="focusMap(28.3736, -16.7648)">
                    <span class="item-name">Garachico</span>
                    <span class="item-desc">Les piscines naturelles El Calet√≥n.</span>
                    <span class="item-day">Samedi midi</span>
                </li>
                <li onclick="focusMap(28.4780, -16.4385)">
                    <span class="item-name">Parque Los Lavaderos</span>
                    <span class="item-desc">Joli parc avec de l'eau √† El Sauzal.</span>
                    <span class="item-day">Samedi aprem</span>
                </li>
                <li onclick="focusMap(28.4705, -16.4346)">
                    <span class="item-name">Casa del Vino</span>
                    <span class="item-desc">Mus√©e et d√©gustation (Optionnel).</span>
                    <span class="item-day">Samedi aprem</span>
                </li>
                <li onclick="focusMap(28.0917, -16.7437)">
                    <span class="item-name">Playa del Duque</span>
                    <span class="item-desc">Plage calme et chic.</span>
                    <span class="item-day">Dimanche / Mardi</span>
                </li>
                <li onclick="focusMap(28.0527, -16.7244)">
                    <span class="item-name">Playa Las Vistas</span>
                    <span class="item-desc">Grande plage am√©nag√©e et accessible.</span>
                    <span class="item-day">Dimanche / Mercredi</span>
                </li>
                 <li onclick="focusMap(28.1816, -16.8170)">
                    <span class="item-name">Playa San Juan</span>
                    <span class="item-desc">Plage familiale prot√©g√©e du vent.</span>
                    <span class="item-day">Mardi aprem</span>
                </li>
                <li onclick="focusMap(28.3045, -16.5666)">
                    <span class="item-name">Mus√©e El Portillo</span>
                    <span class="item-desc">Centre de visiteurs du Teide (Gratuit).</span>
                    <span class="item-day">Vendredi 16h45</span>
                </li>
            </ul>
        </div>

    </div>
</div>

<script>
    // --- CONFIGURATION ---
    var baseUrl = "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/";
    var shadowUrl = "https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png";
    
    function createIcon(color) {
        return new L.Icon({
            iconUrl: baseUrl + 'marker-icon-2x-' + color + '.png',
            shadowUrl: shadowUrl,
            iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41]
        });
    }

    var restoIcon = createIcon('red');
    var viewIcon = createIcon('green');
    var visitIcon = createIcon('blue');
    var defaultIcon = createIcon('grey');

    // --- CARTE ---
    var map = L.map('map').setView([28.2916, -16.6291], 10);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '¬© OpenStreetMap'
    }).addTo(map);

    // --- DONN√âES ---
    var points = [
        // Restos
        { coords: [28.2428, -16.7937], title: "El Rancho", type: "resto" },
        { coords: [28.3947, -16.6396], title: "Las Aguas", type: "resto" },
        { coords: [28.0527, -16.7066], title: "Mercado La Pepa", type: "resto" },
        { coords: [28.4633, -16.2518], title: "March√© Santa Cruz", type: "resto" },
        { coords: [28.3440, -16.8462], title: "El Palmar / Buenavista", type: "resto" },

        // Vues
        { coords: [28.2240, -16.6322], title: "Roques de Garc√≠a", type: "view" },
        { coords: [28.2807, -16.7675], title: "Mirador de los Poleos", type: "view" },
        { coords: [28.2383, -16.6982], title: "Narices del Teide", type: "view" },
        { coords: [28.2404, -16.8370], title: "Mirador Archipenque", type: "view" },
        { coords: [28.4822, -16.4345], title: "Mirador Gara√±ona", type: "view" },
        { coords: [28.3279, -16.8563], title: "Mirador de Barac√°n", type: "view" },
        { coords: [28.3533, -16.8845], title: "Teno Alto", type: "view" },

        // Visites
        { coords: [28.3736, -16.7648], title: "Garachico", type: "visit" },
        { coords: [28.4780, -16.4385], title: "Parque Los Lavaderos", type: "visit" },
        { coords: [28.4705, -16.4346], title: "Casa del Vino", type: "visit" },
        { coords: [28.0917, -16.7437], title: "Playa del Duque", type: "visit" },
        { coords: [28.0527, -16.7244], title: "Playa Las Vistas", type: "visit" },
        { coords: [28.1816, -16.8170], title: "Playa San Juan", type: "visit" },
        { coords: [28.3045, -16.5666], title: "Mus√©e El Portillo", type: "visit" },
        
        // Logistique
        { coords: [28.0444, -16.5725], title: "A√©roport TFS", type: "logistics" }
    ];

    points.forEach(point => {
        var chosenIcon = defaultIcon;
        if (point.type === 'resto') chosenIcon = restoIcon;
        if (point.type === 'view') chosenIcon = viewIcon;
        if (point.type === 'visit') chosenIcon = visitIcon;

        L.marker(point.coords, {icon: chosenIcon}).addTo(map)
            .bindPopup("<b>" + point.title + "</b>");
    });

    // Fonction pour zoomer quand on clique dans la liste
    function focusMap(lat, lng) {
        map.flyTo([lat, lng], 13);
        // Sur mobile, on remonte doucement vers la carte
        if (window.innerWidth < 900) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
</script>

</body>
</html>
